#!/usr/bin/env node

const http = require('http');
const mongoose = require('mongoose');
const app = require('../app');


const { 
    MONGO_USER, 
    MONGO_PASS, 
    MONGO_HOST, 
    MONGO_DATA 
} = process.env;

const uri = `mongodb://${MONGO_USER}:${MONGO_PASS}@${MONGO_HOST}/${MONGO_DATA}?authSource=admin`; 

mongoose.Promise = global.Promise;
mongoose.connect(uri, { useMongoClient: true })
    .then(() => {
        console.log('connected to mongodb')
    })
    .catch((err) => {
        console.log(err);
    });




http.createServer(app).listen(5000);